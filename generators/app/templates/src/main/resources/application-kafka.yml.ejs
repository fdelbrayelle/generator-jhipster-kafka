

kafka:
  bootstrap.servers: ${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
<%_ if (pollingTimeout) { _%>
  polling.timeout: <%= pollingTimeout %>
<%_ } _%>
<%_ if (components.includes('consumer')) { _%>
  consumer:
<%_ for (entity of entities) {
        if (entity === 'no_entity' && componentsPrefixes.length > 0 && componentsPrefixes[0]) {
            entity = componentsPrefixes[0];
        }
_%>
    <%= _.camelCase(entity) _%>:
      enabled: <%= enabled %>
      '[key.deserializer]': org.apache.kafka.common.serialization.StringDeserializer
<%_ if (serializationTypesByEntityConfig[entity] === 'basic_serialization') { _%>
      '[value.deserializer]': <%= packageName %>.service.kafka.deserializer.<%= _.upperFirst(_.camelCase(entity)) %>Deserializer
<%_ } else if (serializationTypesByEntityConfig[entity] === 'jackson_serde_serialization') {
          if (entity === 'no_entity') { _%>
      '[value.deserializer]': <%= packageName %>.service.kafka.serde.JacksonDeserializer<String>
<%_       } else { _%>
      '[value.deserializer]': <%= packageName %>.service.kafka.serde.JacksonDeserializer<<%= _.upperFirst(_.camelCase(entity)) %>>
<%_       }
    } _%>
      '[group.id]': <%= dasherizedBaseName %>
<%_ if (autoOffsetResetPolicy) { _%>
      '[auto.offset.reset]': <%= autoOffsetResetPolicy %>
<%_ } _%>
<%_ } _%>
<%_ } _%>
<%_ if (components.includes('producer')) { _%>
  producer:
<%_ for (entity of entities) {
        if (entity === 'no_entity' && componentsPrefixes.length > 0 && componentsPrefixes[0]) {
            entity = componentsPrefixes[0];
        }
_%>
    <%= _.camelCase(entity) _%>:
      enabled: <%= enabled %>
      '[key.serializer]': org.apache.kafka.common.serialization.StringSerializer
<%_ if (serializationTypesByEntityConfig[entity] === 'basic_serialization') { _%>
      '[value.serializer]': <%= packageName %>.service.kafka.serializer.<%= _.upperFirst(_.camelCase(entity)) %>Serializer
<%_ } else if (serializationTypesByEntityConfig[entity] === 'jackson_serde_serialization') {
          if (entity === 'no_entity') { _%>
      '[value.serializer]': <%= packageName %>.service.kafka.serde.JacksonSerializer<String>
<%_       } else { _%>
      '[value.deserializer]': <%= packageName %>.service.kafka.serde.JacksonSerializer<<%= _.upperFirst(_.camelCase(entity)) %>>
<%_       }
    } _%>
<%_ } _%>
<%_ } _%>
<%_ if (components.includes('consumer') || components.includes('producer')) { _%>
  topic:
<%_ for (topic of topics) { _%>
    <%= topic.key %>: <%= topic.value %>
<%_ } _%>
<%_ } _%>

